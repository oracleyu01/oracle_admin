
## â­â­ [ì˜¤ë¼í´ ê´€ë¦¬]  1.3 ê³µìœ í’€(shared pool)ì´ ì™œ í•„ìš”í•œì§€ ì•Œì•„ì•¼í•´ìš” â­â­

<img src="https://github.com/oracleyu01/oracle_admin/blob/main/%EC%98%A4%EB%9D%BC%ED%81%B4%20%EA%B8%B0%EB%B3%B8%20%EA%B5%AC%EC%A1%B0.png" width="700" height="500">


### 1ï¸âƒ£  shared pool ì˜ ì—­í™œì´ ë¬´ì—‡ì¸ê°€ìš” ?'

&nbsp;  

**âš¡ ë‹µ:   parsing ì„ ìµœì†Œí™” í•˜ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ ì˜ì—­ì…ë‹ˆë‹¤.**  

  &nbsp;

 **parsing ì˜ ëœ» ?**   ì‚¬ëŒì´ ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” SQLê³¼ ê°™ì€ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë³€í™˜  
    
  &nbsp;
 

  SQLì„ ì‹¤í–‰í•˜ë©´ íŒŒì‹±ì„ í•˜ëŠ”ë° íŒŒì‹±ëœ ë°ì´í„°ë¥¼ Shared pool ì— ì˜¬ë¦¬ê³  ì¬ì‚¬ìš©ì„ í•©ë‹ˆë‹¤.  ì¬ì‚¬ìš©í•˜ë¯€ë¡œ ë‹¤ì‹œ íŒŒì‹±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   
    &nbsp;
  
  ì´ íŒŒì‹±ì´ cpu ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê°’ë¹„ì‹¼ ì‘ì—…ë‹ˆë‹¤.  
    &nbsp;

### 2ï¸âƒ£ select ë¬¸ì˜ ì²˜ë¦¬ê³¼ì • 3ê°€ì§€ (â˜…â˜…â˜…)  
  &nbsp;

   ìœ ì ¸ í”„ë¡œì„¸ì„œ ----------------------------> ì„œë²„ í”„ë¡œì„¸ì„œ 

   &nbsp;

   select  empno, ename,sal                        íŒŒì‹±ì„ ìˆ˜í–‰   
     from  emp  
     where ename='SCOTT';    

   &nbsp;

1. íŒŒì‹±(parsing) :    
  - ë¬¸ë²• ê²€ì‚¬(syntex check) : SQLì´ ë¬¸ë²•ì ìœ¼ë¡œ ë¬¸ì œê°€ ì—†ëŠ”ì§€  
  - ì˜ë¯¸ ê²€ì‚¬(symentic check) : emp í…Œì´ë¸”ì´ db ì— ìˆëŠ”ì§€
&nbsp;

 &nbsp;&nbsp;&nbsp;&nbsp; íŒŒì‹± ê²°ê³¼ë¬¼ 3ê°€ì§€ ?    1.  SQLë¬¸ì¥      2. ì‹¤í–‰ê³„íš      3. Parse tree (ì‹¤í–‰ê°€ëŠ¥í•œ ì½”ë“œ) 
&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ìœ„ì˜ 3ê°€ì§€ ê²°ê³¼ë¬¼ì„ shared pool ì— library cache ì— ì˜¬ë¦½ë‹ˆë‹¤.   
&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì™œ ì˜¬ë¦¬ëŠ”ê°€? ë‹¤ìŒë²ˆì— ë˜‘ê°™ì€ ë¬¸ì¥ì´ ë“¤ì–´ì˜¤ë©´ íŒŒì‹±ê³¼ì •ì„ ìƒëµí•˜ë ¤ê³   
&nbsp;

2. ì‹¤í–‰(execute) : ì˜µí‹°ë§ˆì´ì ¸ê°€ ìƒì„±í•´ì¤€ ì‹¤í–‰ê³„íšìœ¼ë¡œ ì‹¤í–‰ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤.

&nbsp;


3. íŒ¨ì¹˜(fetch)  :   ì„œë²„ í”„ë¡œì„¸ì„œ ----------------> ìœ ì ¸ í”„ë¡œì„¸ì„œ   
                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          ê²°ê³¼ ë°ì´í„°
&nbsp;

### ğŸ’ ì‹¤ìŠµ ì£¼ì œ:  
** ë˜‘ê°™ì€ sqlì´ ë“¤ì–´ì™€ì•¼ íŒŒì‹±ê³¼ì •ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤ê³  í–ˆëŠ”ë° ê·¸ëŸ¼ ë˜‘ê°™ì€ sqlì´ ë¬´ì—‡ì¸ê°€ ? **

1. ëŒ€ì†Œë¬¸ì êµ¬ë¶„:

	    SELECT ENAME,SAL FROM EMP WHERE EMPNO=7788;  
	    select ename,sal from emp where empno=7788;  

2. ê³µë°±, ë“¤ì—¬ì“°ê¸° êµ¬ë¶„
   
		select  empno, ename, sal from emp;  
		select    empno,   ename, sal from emp;   

3. ë¦¬í„°ëŸ´ SQL êµ¬ë¶„
   
	    select  empno, ename, sal from emp where empno = 7788;  
	    select  empno, ename, sal from emp where empno = 7902;  
&nbsp;
&nbsp;
&nbsp;
&nbsp;
####1ï¸âƒ£ì‹¤ìŠµ1: dbever ë¡œ ì˜¤ë¼í´ì— ì ‘ì†í•©ë‹ˆë‹¤.  
&nbsp;

####2ï¸âƒ£ì‹¤ìŠµ2:  ì•„ë˜ì˜ sqlì„ ì‹¤í–‰í•©ë‹ˆë‹¤.  

    select empno,ename,sal from emp where empno = 7788; 
  &nbsp; 

####3ï¸âƒ£ì‹¤ìŠµ3:  ì‹¤ìŠµ2ì˜ sqlì´ shared pool ì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.   

    select sql_id, child_number, sql_text  
    from v$sql  
    where sql_text like '%emp%' AND sql_text NOT LIKE '%v$sql%'  
    order by last_load_time desc;  

    SELECT * FROM TABLE(dbms_xplan.display_cursor('', 0 ,'ALLSTATS LAST'));  
&nbsp;

####4ï¸âƒ£ì‹¤ìŠµ4:  ì‹¤ìŠµ2 ì˜ sqlì— ê³µë°±ì„ ì¢€ë” ë„£ì–´ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.  

    select       empno,ename,sal from emp where empno = 7788;  
&nbsp;

####5ï¸âƒ£ì‹¤ìŠµ5: ì‹¤ìŠµ4ì˜ sqlì´ shared pool ì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.  

    select sql_id, child_number, sql_text  
    from v$sql  
    where sql_text like '%emp%' AND sql_text NOT LIKE '%v$sql%'  
    order by last_load_time desc;  
 
    SELECT * FROM TABLE(dbms_xplan.display_cursor('', 0 ,'ALLSTATS LAST'));  

&nbsp;
&nbsp;
&nbsp;
